#!/bin/env python2.7
"""
Plots the data generated by the experiment.
"""
# Set import path
from os import path
import sys
sys.path.append(path.dirname(path.realpath(path.join(__file__, '../..'))))

# Imports
import numpy as np
import tools.plotter as plotter

def read_values(f):
    #budget = []
    sse = []
    with f as error_file:
        for line in error_file:
            b, s = [int(a) for a in line.strip().split(',')]
            #budget.append(b)
            sse.append(s)
    return sse

def parse_arguments():
    import argparse

    parser = argparse.ArgumentParser(
        description="Plots the given CSV files."
        )
    parser.add_argument("slice_tree", type=argparse.FileType("r"),
        help="Slice Tree SSE")
    parser.add_argument("fourier", type=argparse.FileType("r"),
        help="Fourier SSE")
    parser.add_argument("plot", default="plot.png", help="Output plot.")

    return parser.parse_args()

if __name__ == "__main__":

    args = parse_arguments()

    slice_tree = read_values(args.slice_tree)
    fourier = read_values(args.fourier)

    # FIXME: Set this to use a logarithmic scale.
    plotter.bar_chart(
        data_arrays=[slice_tree, fourier],
        xlabel=["DBLP", "Human", "Synthetic", "Traffic", "Twitter", "Wikipedia"],
        ylabel="Error", legend=["Slice Tree", "Fourier"], title="Dataset Experiments", f=args.plot
        )
